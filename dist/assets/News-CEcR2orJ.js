import{r as c,j as e,L as j}from"./index-CbFbJV6X.js";import{L as k}from"./Layout-3AJvlR-q.js";import{S as C}from"./section-header-CAbUlHTW.js";import{C as p,a as N}from"./card-CP9_NJMq.js";import{B as d}from"./tslib.es6-C6ewf6Q2.js";import{I as U}from"./ImageLightbox-CmYSR5XV.js";import{s as A}from"./supabaseClient-CVOyIDca.js";import{g as m}from"./imageUtils-BlG1ZkVv.js";import{C as b}from"./calendar-CG6X50hi.js";import{A as w}from"./arrow-right-4d_BoaUl.js";const S=["All","Announcements","Programs","Impact","Partnerships","Events","Reports"];function P(){const[l,y]=c.useState("All"),[x,h]=c.useState([]),[u,o]=c.useState([]),[f,g]=c.useState(null),i=t=>{const r=t.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);if(r)return`https://img.youtube.com/vi/${r[1]}/maxresdefault.jpg`;const a=t.match(/vimeo\.com\/(\d+)/);return a?`https://vumbnail.com/${a[1]}.jpg`:null};c.useEffect(()=>{(async()=>{try{const{data:r,error:a}=await A.from("news").select("*").order("date",{ascending:!1});if(a)throw a;r&&r.length>0?(h(r),o(r)):fetch("/data/news.json").then(n=>n.json()).then(n=>{h(n),o(n)}).catch(n=>{console.error("Failed to fetch news from fallback JSON:",n)})}catch{fetch("/data/news.json").then(a=>a.json()).then(a=>{h(a),o(a)}).catch(a=>{console.error("Failed to fetch news from fallback JSON:",a)})}})()},[]),c.useEffect(()=>{if(l==="All")o(x);else{const t=x.filter(r=>(Array.isArray(r.category)?r.category:[r.category]).includes(l));o(t)}},[l,x]);const s=u.length>0?u[0]:null,v=u;return e.jsxs(k,{children:[f&&e.jsx(U,{src:f.src,alt:f.alt,onClose:()=>g(null)}),e.jsx("section",{className:"relative py-20 bg-gradient-hero",children:e.jsx("div",{className:"container-custom",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center animate-fade-up",children:[e.jsxs("h1",{className:"font-heading text-4xl md:text-5xl font-bold text-foreground mb-6",children:["News & ",e.jsx("span",{className:"gradient-text",children:"Updates"})]}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Stay informed about our latest activities, achievements, and community impact"})]})})}),e.jsx("section",{className:"section-padding bg-background",children:e.jsx("div",{className:"container-custom",children:s?e.jsx(p,{className:"overflow-hidden border-none shadow-card animate-fade-up",children:e.jsx(N,{className:"p-0",children:e.jsxs("div",{className:"grid md:grid-cols-2",children:[e.jsxs(j,{to:`/news/${s.id}`,className:"bg-gradient-to-br from-primary to-primary/70 p-8 md:p-12 text-primary-foreground min-h-[350px] flex flex-col justify-end relative cursor-pointer group",children:[s.videoUrl&&i(s.videoUrl)&&!s.image&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:i(s.videoUrl),alt:s.title,className:"absolute inset-0 w-full h-full object-cover opacity-30 hover:opacity-40 transition-opacity"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/30 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),s.videoUrl&&!i(s.videoUrl)&&!s.image&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/30 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})})}),s.image&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:m(s.image),alt:s.title,className:"absolute inset-0 w-full h-full object-cover opacity-20 hover:opacity-25 transition-opacity"}),e.jsx("button",{type:"button",className:"absolute top-4 right-4 z-20 bg-white/80 rounded-full p-2 shadow hover:bg-white",onClick:t=>{t.preventDefault(),g({src:m(s.image),alt:s.title})},"aria-label":"Preview image",children:e.jsxs("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h2",{className:"font-heading text-2xl md:text-3xl font-bold mb-2",children:s.title}),e.jsxs("span",{className:"inline-flex items-center gap-2 text-sm opacity-80",children:[e.jsx(b,{className:"h-4 w-4"}),s.date]})]})]}),e.jsxs("div",{className:"p-8 md:p-12 flex flex-col justify-center",children:[e.jsx("span",{className:"text-primary font-medium text-sm mb-2",children:"Featured Article"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:s.excerpt}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(j,{to:`/news/${s.id}`,children:e.jsxs(d,{className:"w-fit gap-2",children:["Read More",e.jsx(w,{className:"h-4 w-4"})]})}),s.videoUrl&&e.jsx("a",{href:s.videoUrl,target:"_blank",rel:"noopener noreferrer",children:e.jsx(d,{variant:"outline",className:"w-fit gap-2",children:"Watch Video →"})}),s.link&&e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-muted-foreground hover:text-primary inline-flex items-center gap-1",children:"View external source"})]})]})]})})}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No news articles available"})})})}),e.jsx("section",{className:"section-padding bg-muted",children:e.jsxs("div",{className:"container-custom",children:[e.jsx(C,{title:"Latest News",subtitle:"Recent updates from our programs and initiatives"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-10",children:S.map(t=>e.jsx(d,{variant:t===l?"default":"outline",size:"sm",onClick:()=>y(t),children:t},t))}),v.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map((t,r)=>e.jsx(p,{className:"card-hover border-none shadow-card animate-fade-up",style:{animationDelay:`${r*100}ms`},children:e.jsxs(N,{className:"p-6",children:[t.image&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"mb-4 -mx-6 -mt-6 h-48 overflow-hidden rounded-t-lg relative",children:e.jsx("img",{src:m(t.image),alt:t.title,className:"w-full h-full object-cover hover:scale-105 transition-transform cursor-pointer",onClick:()=>g({src:m(t.image),alt:t.title})})})}),t.videoUrl&&!t.image&&i(t.videoUrl)&&e.jsxs("div",{className:"mb-4 -mx-6 -mt-6 h-48 overflow-hidden rounded-t-lg cursor-pointer relative group",onClick:()=>window.open(t.videoUrl,"_blank"),children:[e.jsx("img",{src:i(t.videoUrl),alt:t.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/30 group-hover:bg-black/40 transition-all flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-600 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),t.videoUrl&&!t.image&&!i(t.videoUrl)&&e.jsx("div",{className:"mb-4 -mx-6 -mt-6 h-48 overflow-hidden rounded-t-lg bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center cursor-pointer group",onClick:()=>window.open(t.videoUrl,"_blank"),children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-2 rounded-full bg-white/30 flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx("svg",{className:"w-6 h-6 text-white ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),e.jsx("p",{className:"text-sm font-semibold",children:"Click to Watch"})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-3",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:t.date})]}),e.jsx("h3",{className:"font-heading font-semibold text-lg text-foreground mb-3",children:t.title}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:t.excerpt}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsx(j,{to:`/news/${t.id}`,style:{textDecoration:"none"},children:e.jsxs(d,{variant:"link",className:"p-0 h-auto gap-1 text-primary",tabIndex:0,children:["Read More",e.jsx(w,{className:"h-4 w-4"})]})}),t.videoUrl&&e.jsx("a",{href:t.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:text-primary/80 font-medium",children:"Watch Video →"})]})]})},t.id))})}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:l==="All"?"No news articles yet":`No ${l} articles yet`})})]})})]})}export{P as default};
