import{a as j,b as v,r as a,j as e,L as h}from"./index-D9R4Akd5.js";import{B as c}from"./tslib.es6-DfeBbzUv.js";import{B as b}from"./badge-BkCLsBp4.js";import{I as N}from"./ImageLightbox-DaMiCEWQ.js";import{s as w}from"./supabaseClient-DW4Zkobx.js";import{g as d}from"./imageUtils-CrwYCcaB.js";import{A as u}from"./arrow-left-CeCLpqL9.js";import{C as y}from"./calendar-DqQdMlRu.js";import{F as k}from"./file-text-BG3WiyUX.js";import{E as A}from"./external-link-Cyrs8oyF.js";import"./wrapper-DyEgGJL0.js";const T=()=>{const{id:l}=j(),i=v(),[r,f]=a.useState(null),[p,g]=a.useState(!0),[o,m]=a.useState(null),x=n=>{const s=n.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);if(s)return`https://img.youtube.com/vi/${s[1]}/maxresdefault.jpg`;const t=n.match(/vimeo\.com\/(\d+)/);return t?`https://vumbnail.com/${t[1]}.jpg`:null};return a.useEffect(()=>{(async()=>{try{const{data:s,error:t}=await w.from("news").select("*").eq("id",l).single();t||!s?(console.warn("NewsDetail: Article not found for id",l),i("/news")):f(s)}catch(s){console.error("Error fetching article:",s),i("/news")}finally{g(!1)}})()},[l,i]),p?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading article..."})]})}):r?e.jsxs(e.Fragment,{children:[o&&e.jsx(N,{src:o.src,alt:o.alt,onClose:()=>m(null)}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-secondary/20 py-12",children:e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsx(h,{to:"/news",children:e.jsxs(c,{variant:"ghost",className:"mb-6",children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Back to News"]})}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx(b,{className:"mb-4",children:Array.isArray(r.category)?r.category.join(", "):r.category}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:r.title}),e.jsx("div",{className:"flex items-center gap-4 text-muted-foreground mb-8",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{children:r.published_at?new Date(r.published_at).toLocaleDateString():""})]})}),r.videoUrl&&e.jsxs("div",{className:"mb-8",children:[e.jsx("a",{href:r.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("div",{className:"rounded-lg overflow-hidden shadow-lg relative group cursor-pointer",children:x(r.videoUrl)?e.jsxs("div",{className:"relative aspect-video bg-gray-900",children:[e.jsx("img",{src:x(r.videoUrl),alt:r.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 group-hover:bg-black/50 transition-all flex items-center justify-center",children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-red-600 flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})})})]}):e.jsx("div",{className:"relative aspect-video bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white p-8",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-white/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),e.jsx("p",{className:"text-lg font-semibold",children:"Click to Watch Video"}),e.jsxs("p",{className:"text-sm opacity-80 mt-2",children:["Opens in ",r.videoUrl.includes("facebook")?"Facebook":r.videoUrl.includes("youtube")?"YouTube":"new tab"]})]})})})}),e.jsx("a",{href:r.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 mt-3 text-primary hover:text-primary/80 font-medium",children:"Watch on source platform â†’"})]}),r.image_url&&!r.videoUrl&&e.jsx("div",{className:"mb-8 rounded-lg overflow-hidden shadow-lg cursor-pointer",onClick:()=>m({src:d(r.image_url),alt:r.title}),children:e.jsx("img",{src:d(r.image_url),alt:r.title,className:"w-full h-auto object-cover hover:opacity-90 transition-opacity"})}),e.jsxs("div",{className:"prose prose-lg max-w-none mb-8",children:[r.excerpt&&e.jsx("p",{className:"text-xl text-muted-foreground mb-6",children:r.excerpt}),e.jsx("div",{className:"whitespace-pre-wrap text-foreground leading-relaxed",children:r.body})]}),r.document&&e.jsx("div",{className:"bg-muted/50 rounded-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Attached Document"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.document.split("/").pop()})]})]}),e.jsx("a",{href:d(r.document),download:!0,target:"_blank",rel:"noopener noreferrer",children:e.jsx(c,{children:"Download"})})]})}),r.link&&e.jsx("div",{className:"border-t pt-6",children:e.jsxs("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-primary hover:underline",children:[e.jsx(A,{className:"h-4 w-4"}),"Read full article at source"]})}),e.jsx("div",{className:"mt-12 pt-8 border-t",children:e.jsx(h,{to:"/news",children:e.jsxs(c,{variant:"outline",children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Back to News"]})})})]})]})})]}):null};export{T as default};
